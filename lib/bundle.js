"use strict";!function e(r,t,n){function a(c,s){if(!t[c]){if(!r[c]){var i="function"==typeof require&&require;if(!s&&i)return i(c,!0);if(o)return o(c,!0);var u=new Error("Cannot find module '"+c+"'");throw u.code="MODULE_NOT_FOUND",u}var f=t[c]={exports:{}};r[c][0].call(f.exports,function(e){var t=r[c][1][e];return a(t?t:e)},f,f.exports,e,r,t,n)}return t[c].exports}for(var o="function"==typeof require&&require,c=0;c<n.length;c++)a(n[c]);return a}({1:[function(e,r,t){function n(){function r(){var e,r;for(e=0,r=l.length;r>e;e++)l[e]=0;for(e=0,r=i.length;r>e;e++)l[e]=i[e];for(e=0,r=b.length;r>e;e++)b[e]=0;for(e=0,r=u.length;r>e;e++)u[e]=0;h=0,d=0,f=t,p=60,w=60,v=!1}var t=512,n=4096,a=16,o=16,c=64,s=32,i=[240,144,144,144,240,32,96,32,32,112,240,16,240,128,240,240,16,240,16,240,144,144,240,16,16,240,128,240,16,240,240,128,240,144,240,240,16,32,64,64,240,144,240,144,240,240,144,240,16,240,240,144,240,144,144,224,144,224,144,224,240,128,128,128,240,224,144,144,144,224,240,128,240,128,240,240,128,240,128,128],u=new Array(c*s),f=null,l=new Uint8Array(new ArrayBuffer(n)),b=new Array(a),d=null,k=new Array(o),h=null,p=null,w=null,y={},v=null,g=!1,m=null;return r(),{get getDisplayWidth(){return c},get getDisplayHeight(){return s},setRenderer:function(e){if("function"!=typeof e.clear||"function"!=typeof e.render||"function"!=typeof e.beep)throw console.error("The given renderer does not have one or more of these 3 function : clear, render(display), beep");m=e},setKey:function(e){y[e]=!0},unsetKey:function(e){delete y[e]},loadProgram:function(e){for(var r=0,n=e.length;n>r;r++)l[t+r]=e[r]},reset:r,start:function(r){if(null==m){if(null==r)throw new Error("You must specify a renderer.");m=e("../src/renderer")(r,c,s)}v=!0;var t=this;requestAnimationFrame(function n(){for(var e=0;18>e;e++)v&&t.emulateCycle();g&&(m.render(u),g=!1),p--,w>0&&(1==w&&m.beep(),w--),requestAnimationFrame(n)})},stop:function(){v=!1},emulateCycle:function(){var e=l[f]<<8|l[f+1],r=(3840&e)>>8,t=(240&e)>>4;switch(f+=2,61440&e){case 0:switch(e){case 224:for(var n=0,a=u.length;a>n;n++)u[n]=0;g=!0;break;case 238:f=k[--h]}break;case 4096:f=4095&e;break;case 8192:k[h]=f,h++,f=4095&e;break;case 12288:b[r]===(255&e)&&(f+=2);break;case 16384:b[r]!=(255&e)&&(f+=2);break;case 20480:b[r]===b[t]&&(f+=2);break;case 24576:b[r]=255&e;break;case 28672:var o=(255&e)+b[r];o>255&&(o-=256),b[r]=o;break;case 32768:switch(15&e){case 0:b[r]=b[t];break;case 1:b[r]|=b[t];break;case 2:b[r]&=b[t];break;case 3:b[r]^=b[t];break;case 4:b[r]+=b[t],b[15]=+(b[r]>255),b[r]>255&&(b[r]+=256);break;case 5:b[15]=+(b[r]>b[t]),b[r]-=b[t],b[r]<0&&(b[r]+=256);break;case 6:b[15]=1&b[r],b[r]>>=1;break;case 7:b[15]=+(b[t]>b[r]),b[r]=b[t]-b[r],b[r]<0&&(b[r]+=256);break;case 14:b[15]=+(128&b[r]),b[r]<<=1,b[r]>255&&(b[r]-=256)}break;case 36864:b[r]!=b[t]&&(f+=2);break;case 40960:d=4095&e;break;case 45056:f=(4095&e)+b[0];break;case 49152:b[r]=Math.floor(255*Math.random())&(255&e);break;case 53248:var c=15&e,s=null;b[15]=0;for(var i=0;c>i;i++){s=l[d+i];for(var v=0;8>v;v++)(s&128>>v)>0&&(1==u[b[r]+v+64*(b[t]+i)]&&(b[15]=1),u[b[r]+v+64*(b[t]+i)]^=1)}g=!0;break;case 57344:switch(255&e){case 158:y[b[r]]&&(f+=2);break;case 161:y[b[r]]||(f+=2)}break;case 61440:switch(255&e){case 7:b[r]=p;break;case 10:var m=this.setKey,A=this;this.setKey=function(e){b[r]=e,A.setKey=m.bind(A),A.setKey.apply(A,arguments),this.start()},this.stop();break;case 21:p=b[r];break;case 24:w=b[r];break;case 30:d+=b[r];break;case 41:d=5*b[r];break;case 51:l[d]=b[r]/100,l[d+1]=b[r]/10%10,l[d+2]=b[r]%100%10;break;case 85:for(n=0;r>=n;n++)l[d+n]=b[n];break;case 101:for(n=0;r>=n;n++)b[n]=l[d+n]}break;default:throw new Error("Unknown opCode "+e.toString(16)+" passed. Terminating.")}}}}r.exports=n},{"../src/renderer":3}],2:[function(e,r,t){var n=window.Chip8||{};n=e("./chip8")(),n.Renderer=e("./renderer"),window.Chip8=n},{"./chip8":1,"./renderer":3}],3:[function(e,r,t){function n(e,r,t,n,a,o){r=r||64,t=t||32,n=n||10,a=a||"#f00",o=o||"#fff";var c,s=e.getContext("2d");try{window.AudioContext=window.AudioContext||window.webkitAudioContext,c=new AudioContext}catch(i){alert("Your browser does not support Web Audio API")}return{clear:function(){s.clearRect(0,0,r*n,t*n)},render:function(e){this.clear();for(var t,c,i=0,u=e.length;u>i;i++)t=i%r*n,c=Math.floor(i/r)*n,s.fillStyle=[o,a][e[i]],s.fillRect(t,c,n,n)},beep:function(){if(c){var e=c.createOscillator();e.connect(c.destination),e.type="square",e.start(),setTimeout(function(){e.stop()},100)}}}}r.exports=n},{}]},{},[2]);